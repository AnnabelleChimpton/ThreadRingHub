# Ring Hub Environment Configuration
# Copy this file to .env and update values for your environment

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DATABASE_URL=postgresql://ringhub:Ringyhubby22@localhost:5432/ringhub
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
NODE_ENV=development
PORT=3000
HOST=0.0.0.0
LOG_LEVEL=debug

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# Ed25519 private key for signing responses and badges
# Generate with: openssl genpkey -algorithm Ed25519 -out signing-key.pem
SIGNING_KEY_PATH=./keys/signing-key.pem
# Or provide the key directly (base64 encoded)
SIGNING_KEY=

# JWT secret for internal authentication tokens
JWT_SECRET=development-jwt-secret-change-in-production
JWT_EXPIRES_IN=24h

# CORS configuration
CORS_ORIGINS=*
CORS_CREDENTIALS=true

# =============================================================================
# INSTANCE CONFIGURATION
# =============================================================================
# The DID that identifies this Ring Hub instance
INSTANCE_DID=did:web:localhost:3000
INSTANCE_NAME=Ring Hub Development
INSTANCE_DESCRIPTION=Development instance of Ring Hub
INSTANCE_VERSION=0.1.0

# Public URL for this instance (used in badges and federation)
PUBLIC_URL=http://localhost:3000

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_ENABLED=true
# Authenticated requests per hour
RATE_LIMIT_AUTHENTICATED=1000
# Unauthenticated requests per hour per IP
RATE_LIMIT_ANONYMOUS=100
# Burst limit for short-term spikes
RATE_LIMIT_BURST=50

# =============================================================================
# FEDERATION CONFIGURATION
# =============================================================================
FEDERATION_ENABLED=false
ACTIVITYPUB_ENABLED=false
FEDERATION_ALLOWLIST=
FEDERATION_BLOCKLIST=

# WebFinger support
WEBFINGER_ENABLED=true

# =============================================================================
# CACHING CONFIGURATION
# =============================================================================
# Cache TTLs in seconds
CACHE_RINGS_TTL=300
CACHE_MEMBERS_TTL=120
CACHE_FEEDS_TTL=60
CACHE_TRENDING_TTL=600
CACHE_SEARCH_TTL=120

# =============================================================================
# CONTENT POLICY
# =============================================================================
# Maximum sizes
MAX_RING_NAME_LENGTH=100
MAX_RING_SUMMARY_LENGTH=500
MAX_RING_DESCRIPTION_LENGTH=2000
MAX_RINGS_PER_ACTOR=50
MAX_MEMBERS_PER_RING=10000

# PostRef validation
MAX_POST_URL_LENGTH=2000
ALLOWED_POST_SCHEMES=https,http
REQUIRED_POST_DIGEST=true

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
# Metrics collection
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Health check configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health

# Request logging
LOG_REQUESTS=true
LOG_REQUEST_HEADERS=false
LOG_REQUEST_BODY=false

# Error tracking (Sentry)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# =============================================================================
# WEBHOOK CONFIGURATION
# =============================================================================
WEBHOOKS_ENABLED=false
WEBHOOK_SECRET=
WEBHOOK_TIMEOUT=5000
WEBHOOK_RETRIES=3

# =============================================================================
# EMAIL CONFIGURATION (for notifications)
# =============================================================================
EMAIL_ENABLED=false
EMAIL_FROM=noreply@ringhub.org
EMAIL_FROM_NAME=Ring Hub

# SMTP Configuration
SMTP_HOST=
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=
SMTP_PASS=

# =============================================================================
# FILE STORAGE (for badges and assets)
# =============================================================================
STORAGE_TYPE=local
# Options: local, s3, gcs

# Local storage
LOCAL_STORAGE_PATH=./storage

# S3 Configuration
S3_BUCKET=
S3_REGION=
S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=
S3_ENDPOINT=

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================
# Hot reloading
WATCH_FILES=true

# API documentation
SWAGGER_ENABLED=true
SWAGGER_PATH=/docs

# Development tools
DEVELOPMENT_ENDPOINTS_ENABLED=true

# Seed data
SEED_DATA_ENABLED=true
SEED_DATA_PATH=./scripts/seed-data.json

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_GENEALOGY_ENABLED=true
FEATURE_BADGES_ENABLED=true
FEATURE_AUDIT_LOGS_ENABLED=true
FEATURE_BULK_OPERATIONS_ENABLED=true
FEATURE_ADVANCED_SEARCH_ENABLED=true

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================
# Test database (only used in test environment)
TEST_DATABASE_URL=postgresql://test:test@localhost:5432/ringhub_test
TEST_REDIS_URL=redis://localhost:6379/1

# Disable external calls during testing
TEST_DISABLE_HTTP_CALLS=true
TEST_DISABLE_WEBHOOKS=true